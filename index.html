<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IAMOBI - SISTEMA INTEGRADO V5.1</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@500;700&display=swap');

        body { 
            background: #020408; color: #f8fafc; font-family: 'Rajdhani', sans-serif; 
            margin: 0; padding: 15px; display: flex; flex-direction: column; align-items: center; 
        }

        .container { width: 100%; max-width: 420px; }

        .header { 
            text-align: center; padding: 20px; border: 1px solid #1ed760; border-radius: 15px; 
            margin-bottom: 25px; background: rgba(30, 215, 96, 0.02);
            box-shadow: 0 0 20px rgba(30, 215, 96, 0.1);
        }
        .header h1 { font-family: 'Orbitron', sans-serif; font-size: 1.8rem; color: #1ed760; margin: 0; text-shadow: 0 0 10px #1ed760; }

        .card { 
            background: linear-gradient(145deg, #0f172a 0%, #020617 100%); 
            border-radius: 24px; padding: 25px; margin-bottom: 15px; 
            border: 1px solid rgba(255,255,255,0.05); box-shadow: 10px 10px 30px rgba(0,0,0,0.5);
            position: relative; overflow: hidden;
        }
        .utb { border-left: 4px solid #f97316; }
        .brb { border-left: 4px solid #3b82f6; }

        h2 { margin: 0; font-size: 1rem; color: #fff; font-family: 'Orbitron', sans-serif; letter-spacing: 2px; text-transform: uppercase; }

        .btn { 
            padding: 18px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; 
            color: #fff; font-size: 0.85rem; text-transform: uppercase; width: 100%; 
            font-family: 'Orbitron', sans-serif; transition: 0.1s; margin-top: 15px;
            box-shadow: 0 6px 0px rgba(0,0,0,0.5);
        }
        .btn:active { transform: translateY(3px); box-shadow: 0 3px 0px rgba(0,0,0,0.5); }
        
        .btn-utb { background: linear-gradient(to bottom, #f97316, #c2410c); }
        .btn-brb { background: linear-gradient(to bottom, #3b82f6, #1d4ed8); }

        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        
        .infinite { 
            background: linear-gradient(to bottom, #1ed760, #15803d); 
            color: #000; grid-column: span 2; box-shadow: 0 5px 0px #065f46; 
        }

        .btn-inter { background: #ff7a00; box-shadow: 0 5px 0px #b35600; }
        .btn-nubank { background: #820ad1; box-shadow: 0 5px 0px #4c067a; }
        .btn-itau { background: #ec7000; box-shadow: 0 5px 0px #a04d00; }
        .btn-bradesco { background: #cc092f; box-shadow: 0 5px 0px #8a0620; }
        .btn-caixa { background: #005ca9; box-shadow: 0 5px 0px #003e73; }
        .btn-santander { background: #ec0000; box-shadow: 0 5px 0px #a00000; }

        #pixModal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.95); z-index: 9999; align-items: center; justify-content: center;
        }
        .modal-content {
            background: #0f172a; border: 1px solid #1ed760; padding: 25px; border-radius: 20px;
            width: 85%; max-width: 350px; text-align: center;
        }
        .input-pix {
            background: rgba(255,255,255,0.05); border: 1px solid #334155; color: #1ed760;
            font-family: 'Orbitron', sans-serif; font-size: 1.5rem; width: 100%;
            padding: 15px; border-radius: 10px; text-align: center; margin: 10px 0; outline: none;
        }
        #qrcode-container { background: #fff; padding: 10px; border-radius: 10px; margin: 15px auto; width: fit-content; display: none; }
        
        .direct-link-box { margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); }
        .direct-link { color: #1ed760; text-decoration: none; font-weight: bold; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }

        footer { margin-top: 30px; font-size: 0.65rem; color: #334155; font-family: monospace; letter-spacing: 2px; }
    </style>
</head>
<body>

<div id="pixModal">
    <div class="modal-content">
        <h2 id="modalTitle" style="color: #1ed760;">VALOR OPERAÃ‡ÃƒO</h2>
        <input type="number" id="valorInput" class="input-pix" placeholder="0.00" step="0.01">
        
        <div id="qrcode-container"></div>
        
        <button id="confirmBtn" class="btn">CONFIRMAR</button>
        <button id="copyPixBtn" class="btn" style="display:none; background: #222; box-shadow: 0 5px 0 #000;">COPIAR PIX COPIA/COLA</button>
        
        <div class="direct-link-box" id="linkContainer" style="display:none;">
            <a id="siteRedirect" href="#" target="_blank" class="direct-link">ðŸ”— ACESSAR SITE DE RECARGA</a>
        </div>
        
        <button class="btn" style="background: transparent; box-shadow: none;" onclick="fecharModal()">VOLTAR</button>
    </div>
</div>

<div class="container">
    <div class="header">
        <h1>IAMOBI</h1>
        <small style="color:#1ed760">SISTEMA DE ALTA AUTORIDADE</small>
    </div>

    <div class="card utb">
        <h2>UTB RECARGAS</h2>
        <button class="btn btn-utb" onclick="abrirModal('utb', '03620000035530', 'https://www.utb.com.br/recarga')">EXECUTAR RECARGA PIX</button>
    </div>

    <div class="card brb">
        <h2>BRB MOBI</h2>
        <button class="btn btn-brb" onclick="abrirModal('brb', '1023449012', 'https://onelink.to/mobilidade')">ABRIR TERMINAL BRB</button>
    </div>

    <div class="grid">
        <button class="btn infinite" onclick="abrirModal('infinite', 'https://link.infinitepay.io/recarga', '')">PAGAR VIA INFINITEPAY</button>
        <button class="btn btn-inter" onclick="openBank('inter')">INTER</button>
        <button class="btn btn-nubank" onclick="openBank('nubank')">NUBANK</button>
        <button class="btn btn-itau" onclick="openBank('itau')">ITAÃš</button>
        <button class="btn btn-bradesco" onclick="openBank('bradesco')">BRADESCO</button>
        <button class="btn btn-caixa" onclick="openBank('caixa')">CAIXA</button>
        <button class="btn btn-santander" onclick="openBank('santander')">SANTANDER</button>
    </div>

    <footer>SISTEMA CRIPTOGRAFADO | PROTOCOLO V5.1</footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrjs2@0.1.7/qrjs2.min.js"></script>
<script>
    let activeMode = '';
    let tempID = '';
    let tempURL = '';
    const PIX_STR = "00020126380014BR.GOV.BCB.PIX0116pago@droppfy.com52040000530398654044.005802BR5907Partner6012Aguas Lindas62070503***6304B414";

    function abrirModal(mode, id, url) {
        activeMode = mode;
        tempID = id;
        tempURL = url;
        
        document.getElementById('qrcode-container').style.display = 'none';
        document.getElementById('copyPixBtn').style.display = 'none';
        document.getElementById('linkContainer').style.display = 'none';
        document.getElementById('valorInput').style.display = 'block';

        const title = document.getElementById('modalTitle');
        const btn = document.getElementById('confirmBtn');
        
        if(mode === 'infinite') {
            title.innerText = "VALOR INFINITEPAY";
            btn.className = "btn infinite";
            btn.innerText = "CONFIRMAR";
            btn.onclick = processarInfinite;
        } else {
            title.innerText = (mode === 'brb' ? "VALOR BRB" : "VALOR UTB");
            btn.className = (mode === 'brb' ? "btn btn-brb" : "btn btn-utb");
            btn.innerText = "CONFIRMAR";
            btn.onclick = gerarFluxoTaggo;
        }
        
        document.getElementById('pixModal').style.display = 'flex';
        document.getElementById('valorInput').focus();
    }

    function gerarFluxoTaggo() {
        // 1. Gerar o QR Code
        const qrContainer = document.getElementById('qrcode-container');
        qrContainer.innerHTML = "";
        const qr = QRCode.generateSVG(PIX_STR, { ecclevel: "Q", fillcolor: "#FFF", textcolor: "#000", margin: 2, modulesize: 6 });
        qrContainer.appendChild(qr);
        qrContainer.style.display = 'block';

        // 2. Mostrar BotÃµes Extras e Link
        document.getElementById('copyPixBtn').style.display = 'block';
        document.getElementById('linkContainer').style.display = 'block';
        document.getElementById('siteRedirect').href = tempURL;
        
        // 3. Configurar BotÃ£o Principal para Copiar e Abrir
        const mainBtn = document.getElementById('confirmBtn');
        mainBtn.innerText = "COPIAR ID E ABRIR SITE";
        
        mainBtn.onclick = function() {
            navigator.clipboard.writeText(tempID).then(() => {
                window.location.href = tempURL;
            });
        };

        document.getElementById('copyPixBtn').onclick = function() {
            navigator.clipboard.writeText(PIX_STR);
            alert("CÃ³digo Pix Copiado!");
        };
        
        document.getElementById('valorInput').style.display = 'none';
    }

    function fecharModal() {
        document.getElementById('pixModal').style.display = 'none';
        document.getElementById('valorInput').value = '';
    }

    function processarInfinite() {
        const valor = document.getElementById('valorInput').value;
        let finalUrl = tempID; 
        if(valor && valor > 0) finalUrl += "/" + valor;
        window.location.href = finalUrl;
    }

    function openBank(banco) {
        const links = {
            'inter': 'intent://#Intent;scheme=inter;package=br.com.intermedium;end',
            'nubank': 'intent://#Intent;scheme=nubank;package=com.nu.production;end',
            'itau': 'intent://#Intent;scheme=itau;package=com.itau;end',
            'bradesco': 'intent://#Intent;scheme=bradesco;package=com.bradesco;end',
            'caixa': 'intent://#Intent;scheme=caixa;package=br.com.gabba.Caixa;end',
            'santander': 'intent://#Intent;scheme=santander;package=br.com.santander.way;end'
        };
        window.location.href = links[banco];
    }
</script>
</body>
</html>
